# üåø –ô–æ–¢–∏–∫ M2 ‚Äî –£–º–Ω–∞—è –¢–µ–ø–ª–∏—Ü–∞ –Ω–∞ ESP32

–ô–æ–¢–∏–∫ M2 ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è IoT-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–ø–ª–∏—Ü–µ–π –Ω–∞ –±–∞–∑–µ ESP32.  
–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –∫–ª–∏–º–∞—Ç–∞, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ–ª–∏–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–º, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏, Telegram-–±–æ—Ç–∞ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

### ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ–ª–∏–≤ —Å –∞–Ω–∞–ª–∏–∑–æ–º –≤–ª–∞–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–∞—Å—Ç–µ–Ω–∏–π  
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å–≤–µ—Ç–æ–≤—ã—Ö –ø–æ—Ä–æ–≥–æ–≤ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –æ—Å–≤–µ—â—ë–Ω–Ω–æ—Å—Ç–∏  
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å—Ç—Ä–µ—Å—Å-–∞–Ω–∞–ª–∏–∑ (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –≤–ª–∞–∂–Ω–æ—Å—Ç—å, —Å–≤–µ—Ç, –ø–æ—á–≤–∞)  
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–µ–π –∏ —Ñ–æ—Ä—Ç–æ—á–∫–æ–π  
- –ü—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫—É–ª—å—Ç—É—Ä (—Ç–æ–º–∞—Ç—ã, –æ–≥—É—Ä—Ü—ã, –∑–µ–ª–µ–Ω—å, –≥–∏–±–∏—Å–∫—É—Å)

### üì± –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
#### üìü –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Web UI –Ω–∞ ESP32
- –ì—Ä–∞—Ñ–∏–∫–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞  
- OTA-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞  

#### ü§ñ Telegram-–±–æ—Ç
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π  
- –ö—Ä–∞—Å–∏–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏:
  - üå° *–°—Ç–∞—Ç—É—Å*
  - üéõ *–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ*
  - üìà *–ò—Å—Ç–æ—Ä–∏—è –∑–∞ —Å—É—Ç–∫–∏*
  - ü©∫ *–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞*
  - üå± *–ü—Ä–æ—Ñ–∏–ª—å –∫—É–ª—å—Ç—É—Ä—ã*
- –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: —Å–≤–µ—Ç, –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä, –ø–æ–ª–∏–≤  
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ –∞–≤–∞—Ä–∏–π/–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

### üîß –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —á–∞—Å—Ç—å
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è:
- **BME280** ‚Äî —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –≤–ª–∞–∂–Ω–æ—Å—Ç—å, –¥–∞–≤–ª–µ–Ω–∏–µ  
- **BH1750** ‚Äî –æ—Å–≤–µ—â—ë–Ω–Ω–æ—Å—Ç—å  
- **–î–∞—Ç—á–∏–∫ –ø–æ—á–≤—ã**: –∫–∞–ø–∞—Ü–∏—Ç–∏–≤–Ω—ã–π, —Å –∫–∞–ª–∏–±—Ä–æ–≤–∫–æ–π  
- **DS3231 RTC** ‚Äî —Ç–æ—á–Ω—ã–µ —á–∞—Å—ã  
- **–†–µ–ª–µ** –¥–ª—è —Å–≤–µ—Ç–∞/–ø–æ–º–ø—ã/–≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏  
- **–°–µ—Ä–≤–æ** (—Ñ–æ—Ä—Ç–æ—á–∫–∞)  
- **TM1637 / NeoPixel** ‚Äî –∏–Ω–¥–∏–∫–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### üíæ –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- EEPROM —Å CRC32  
- –í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫  
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è  
- –ó–∞–ø–∏—Å—å –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –¥–∞—Ç—á–∏–∫–æ–≤  

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –≤ –≤–∏–¥–µ –º–æ–¥—É–ª—å–Ω–æ–π IoT-—Å–∏—Å—Ç–µ–º—ã:

SmartGreenhouse_v3.ino ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞

‚îú‚îÄ‚îÄ Automation/ ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∞ —Ç–µ–ø–ª–∏—Ü—ã

‚îÇ ‚îú‚îÄ –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Å–≤–µ—Ç–∞/–ø–æ—á–≤—ã

‚îÇ ‚îú‚îÄ —Å—Ç—Ä–µ—Å—Å-–∞–Ω–∞–ª–∏–∑

‚îÇ ‚îú‚îÄ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

‚îÇ ‚îî‚îÄ –∏—Å—Ç–æ—Ä–∏—è —Å—É—Ç–æ–∫


‚îú‚îÄ‚îÄ DeviceManager/ ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç—á–∏–∫–∞–º–∏ –∏ –∂–µ–ª–µ–∑–æ–º
‚îú‚îÄ‚îÄ WebUiAsync/ ‚Äî –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ TelegramAsync/ ‚Äî Telegram-–±–æ—Ç
‚îú‚îÄ‚îÄ TimeManager/ ‚Äî NTP + RTC + –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
‚îú‚îÄ‚îÄ SoilCalibration/ ‚Äî –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –¥–∞—Ç—á–∏–∫–∞ –ø–æ—á–≤—ã
‚îú‚îÄ‚îÄ Storage/ ‚Äî EEPROM, CRC, –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ SunPosition/ ‚Äî —Ä–∞—Å—á—ë—Ç —Å–æ–ª–Ω—Ü–∞ (–¥–µ–Ω—å/–Ω–æ—á—å/—É–≥–ª—ã)
‚îú‚îÄ‚îÄ Diagnostics/ ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∏, –∞–ª–µ—Ä—Ç—ã
‚îú‚îÄ‚îÄ TelemetryLogger/ ‚Äî –∏—Å—Ç–æ—Ä–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ Config/Types/Globals ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **ESP32** (NodeMCU / DevKitC / ESP32-WROOM)  
- Arduino IDE –∏–ª–∏ PlatformIO  
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è NTP –∏ Telegram  

### 2. –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Arduino
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ Library Manager:

- `ESP Async WebServer`
- `AsyncTCP`
- `UniversalTelegramBot`
- `ArduinoJson`
- `Adafruit BME280`
- `BH1750`
- `RTClib` –∏–ª–∏ `DS3231`
- `ESP32Servo`

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `Config.h`
–£–∫–∞–∑–∞—Ç—å:

```cpp
namespace WifiConfig {
  const char* SSID = "your_wifi";
  const char* PASS = "your_pass";
}

namespace TelegramConfig {
  const char* BOT_TOKEN = "123456789:ABC...";
  const char* CHAT_ID   = "123456789";
}
–ò –ø–∏–Ω—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.

### 4. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—à–∏–≤–∫–∏

–ó–∞–ª–µ–π –ø—Ä–æ–µ–∫—Ç ‚Üí ESP32 —Å–æ–∑–¥–∞—Å—Ç —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ ‚Üí –ø–æ–¥–∫–ª—é—á–∏—Å—å ‚Üí –Ω–∞—Å—Ç—Ä–æ–π Wi-Fi ‚Üí –≥–æ—Ç–æ–≤–æ.

üß™ –ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞ (–≤ –¥–µ—Ç–∞–ª—è—Ö)
üå± –ü–æ–ª–∏–≤
    –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è –ø–æ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—á–≤—ã
    –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π setpoint
    –û–∫–Ω–æ –ø–æ–ª–∏–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 6:00‚Äì22:00)
    –ó–∞—â–∏—Ç–∞ –æ—Ç "–∑–∞–ª–∏–≤–∞" (—Ç–∞–π–º-–∞—É—Ç—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
    –ê–Ω–∞–ª–∏–∑ –¥–µ–ª—å—Ç—ã –ø–æ—á–≤—ã –ø–æ—Å–ª–µ –ø–æ–ª–∏–≤–∞

üí° –û—Å–≤–µ—â–µ–Ω–∏–µ
    BH1750
    –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä–æ–≥–∏ (–∏—Å—Ç–æ—Ä–∏—è —Å—É—Ç–æ–∫)
    –£—á—ë—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–Ω—è/–Ω–æ—á–∏ –ø–æ SunPosition

üå° –ö–ª–∏–º–∞—Ç
    –ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –ø–æ –ø—Ä–æ—Ñ–∏–ª—é –∫—É–ª—å—Ç—É—Ä—ã
    –í–µ–Ω—Ç–∏–ª—è—Ü–∏—è –ø—Ä–∏ –ø–µ—Ä–µ–≥—Ä–µ–≤–µ
    –§–æ—Ä—Ç–æ—á–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è CO‚ÇÇ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

ü©∫ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:
    –ø–æ—Ç–µ—Ä–∏ —Å–≤—è–∑–∏ —Å –¥–∞—Ç—á–∏–∫–∞–º–∏
    –Ω–µ–≤–µ—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
    –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É –ø–æ–º–ø—ã
    –ø–µ—Ä–µ–≥—Ä–µ–≤
    –æ—à–∏–±–∫–∏ RTC
    —Å—Ç—Ä–µ—Å—Å —Ä–∞—Å—Ç–µ–Ω–∏—è (4 —Ñ–∞–∫—Ç–æ—Ä–∞)
    –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Telegram-alert.

üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    OTA –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª—é—á–∏—Ç—å Telegram
    –•—Ä–∞–Ω–µ–Ω–∏–µ Wi-Fi/–±–æ—Ç–∞ –≤ Config –∏–ª–∏ SPIFFS
    –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è (watchdog ESP32)
